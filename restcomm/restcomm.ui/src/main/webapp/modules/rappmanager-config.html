<div class="ras row">
	<div class="col-md-12">
		<h1 class="page-header">{{projectName}} <small>configuration</small><i class="fa fa-cog pull-right"></i></h1>
		<p class="lead">
			Adjust this application to your local environment.  
		</p>
		<div ng-show='shouldShowHowToConfigure()' class="how-to-configure" >
			<div ng-bind-html="rappConfig.howTo">
			</div>
			<div class="spacer10"></div>
		</div>
		<form name="optionsForm" novalidate>
			<h4>Parameters</h4>
			
			<p ng-show="!rappConfig.options.length" class="text-muted">
				<em>No parameters were defined for this app</em>
			</p>
			
			<div class="form-group" ng-repeat="option in rappConfig.options | filter:filterUserOptions">
				<label>{{option.label}}</label><abbr title="RVD variable syntax"><code>${{option.name}}</code></abbr> <small ng-show="option.required" class="text-muted">(required)</small>
				<input ng-model="option.value" type="text" class="form-control" ng-required="option.required"> 
				
				<span class="help-block">{{option.description}}</span>
			</div>
				
			<div ng-show="(rappConfig.options | filter:filterESOptions).length > 0">
				<div class="form-group" ng-repeat="option in rappConfig.options | filter:filterESOptions">
					<div ng-switch="option.name">
						<div ng-switch-when="instanceToken">
							<label>{{option.label}}</label><abbr title="RVD variable syntax"><code>${{option.name}}</code></abbr> <small ng-show="option.required" class="text-muted">(required)</small>
							<div class="row">
								<div class="col-md-12">
									<input ng-model="option.value" name="instanceToken" type="text" class="form-control" ng-required="option.required"> 
								</div>
								<!--
								<div class="col-md-2">
									<button ng-click="generateNewInstanceToken(option)" class="btn btn-primary pull-right">Generate</button>
								</div>		
								-->
							</div>						 
							<span class="help-block">{{option.description}}</span>
							<!--
							<span class="help-block">For multitenant applications a unique identifier and security token is used. This token is usually provided by the vendor of the application or can be automatically generated by you if the vendor permits it. You can create a new instanceToken by clicking generate. Make sure you keep it in a safe place. Losing this token effectively means you won't be able to access your backend data.</span>
							<div ng-show="rappConfig.allowInstanceCreation">
								<h5 style="margin-top:20px"><strong>Create new instance</strong></h5>
								<span ng-show="rappConfig.allowInstanceCreation" class="help-block">Paste the following URL in your browser to create a new instance (make sure you have the correct values in <em>Backend Root URL</em> and <em>Instance Token</em> parameters first).</span>
								<span ng-show="rappConfig.allowInstanceCreation" class="help-block">{{getOptionByName("backendRootURL",rappConfig.options).value}}/provisioning/spawnInstance.php?instanceToken={{getOptionByName("instanceToken",rappConfig.options).value}}</span>							
							</div>
							-->
						</div>
						
						<div ng-switch-when="backendRootURL">
								<label>{{option.label}}</label><abbr title="RVD variable syntax"><code>${{option.name}}</code></abbr> <small ng-show="option.required" class="text-muted">(required)</small>
								<input ng-model="option.value" name="backendRootURL" type="text" class="form-control" ng-required="option.required">								
								<span class="help-block">{{option.description}}</span>
						</div>	
					</div>					
				</div>
			</div>	
			
			<br/>
			<div class="form-group">
				<button ng-disabled="!optionsForm.$valid" ng-click="enableConfiguration(rappConfig)" type="button" class="btn btn-primary">Apply configuration</button>
				<!-- <button ng-disabled="!(rappConfig.allowInstanceCreation && optionsForm.instanceToken.$valid && optionsForm.backendRootURL.$valid)" ng-click="createNewInstance()" type="button" class="btn btn-danger">Create new instance</button> -->
			</div>
			{{watchOptionFormValidity(optionsForm.$valid)}}
		</form>
		
		<div ng-show="needsBootstrapping(rappConfig, rapp)">
			<div class="spacer10"></div>
			<form target="_blank" method="POST" action="{{buildBackendBoostrapUrl(rappConfig, rapp)}}">
			<div>
				<h5 style="margin-top:20px"><strong>Web UI</strong></h5>
				<span class="help-block">You can access the application Web UI by clicking the button below. Make sure all required fields are set and configuration changes applied.</span>
			</div>
			<span class="help-block"></span>
				<input type="hidden" ng-repeat="option in rappConfig.options | filter:filterInitOptions" name="{{option.name}}" value="{{option.value}}">
				<div class="spacer10"></div>
				<button ng-disabled="!optionsFormValid" class="btn btn-primary" type="submit">Launch Web UI</button>
			</form>
		</div>
		
					
		<br/><br>
		<div class="form-group">
			Back to <a href="#/ras">Restcomm Apps</a>
		</div>
	</div>
</div>
