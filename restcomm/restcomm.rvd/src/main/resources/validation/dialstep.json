{
    "$schema": "http://json-schema.org/draft-04/schema#",
	"title": "RVD project 0.1",
	"description": "Specification for RVD 7.1.4",
	"type": "object",
	"properties": {
		"name":{"type": "string"},
		"kind": {"enum": ["dial"]},
		"label": {"type": "string"},
		"title": {"type": "string"},
		"method":{"enum": ["GET","POST"]},
		"timeout":{"type":["null","integer"]},
		"timeLimit":{"type":["null","integer"]},
		"callerId":{"type":["null","string"]},
		"dialNouns": {
			"type": "array",
			"items": {
				"type": "object",
				"oneOf": [
					{ "$ref": "#/numberNoun" },
					{ "$ref": "#/clientNoun" },
					{ "$ref": "#/conferenceNoun" },
					{ "$ref": "#/sipuriNoun" }
				]
			}
		},
		"nextModule": {"type":"string"},

	
		"iface": {"type": "object"}
	},
	"required": ["name","kind","label","title","dialNouns","nextModule"],
	
	"numberNoun": {
		"type":"object",
		"properties": {
			"dialType": {"enum":["number"]},
			"destination":{"type":"string"},
			"sendDigits": { "$ref": "rvdproject-schema.json#/nullOrString" },
			"beforeConnectModule":{ "$ref": "rvdproject-schema.json#/nullOrString" },
			"iface": {"type": "object"}
		},
		"required":["dialType","destination"],
		"additionalProperties": false
	},
	"clientNoun": {
		"type":"object",
		"properties": {
			"dialType": {"enum":["client"]},
			"destination":{"type":"string"},
			"iface": {"type": "object"}
		},
		"required": ["dialType","destination"],
		"additionalProperties": false
	},	
	"conferenceNoun": {
		"type":"object",
		"properties": {
			"dialType": {"enum":["conference"]},
			"destination": {"type":"string"},
			"nextModule": {"$ref": "rvdproject-schema.json#/nullOrString" },
			"muted": {"type": ["null","boolean"]},
			"beep": {"type": ["null","boolean"]},
			"startConferenceOnEnter": {"type": ["null","boolean"]},
			"endConferenceOnExit": {"type": ["null","boolean"]},
			"waitUrl": { "$ref": "rvdproject-schema.json#/nullOrString" },
			"waitModule": {"$ref": "rvdproject-schema.json#/nullOrString"},
			"waitMethod": {"enum":["GET","POST"]},
			"maxParticipants": {
				"oneOf":[
					{"type":"null"},
					{"type":"integer"}
				]
			},
			
			
			"iface": {"type": "object"}
		},
		"required": ["dialType","destination","nextModule","muted","beep","startConferenceOnEnter","endConferenceOnExit","waitUrl","waitModule","waitMethod","maxParticipants"],
		"additionalProperties": false
	},	
	"sipuriNoun": {
		"type":"object",
		"properties": {
			"dialType": {"enum":["sipuri"]},
			"destination":{"type":"string"},
			"iface": {"type": "object"}
		},
		"required": ["dialType","destination"],
		"additionalProperties": false
	}	
}

