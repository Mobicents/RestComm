{
    "$schema": "http://json-schema.org/draft-04/schema#",
	"title": "RVD project 0.1",
	"description": "Specification for RVD 7.1.4",
	"rvdproject": {
		"type": "object",
		"properties": {
			"nodes": {
				"type": "array",
				"items": {
					"title": "RVD module",
					"type": "object",
					"uniqueItems": true,
					"properties": {
						"name": {"type": "string"},
						"label": {"type": "string"},
						"steps": {
							"title": "Generic RVD step",
							"type": "object",
							"patternProperties": {
								"^step[0-9]+$": {
									"type": "object",
									"oneOf": [
										{ "$ref": "saystep.json" },
										{ "$ref": "playstep.json" },
										{ "$ref": "gatherstep.json" },
										{ "$ref": "dialstep.json" },
										{ "$ref": "hangupstep.json" },
										{ "$ref": "externalServiceStep.json" },
										{ "$ref": "rejectStep.json" },
										{ "$ref": "pauseStep.json" },
										{ "$ref": "redirectStep.json" },
										{ "$ref": "smsStep.json" },
										{ "$ref": "recordStep.json" },
										{ "$ref": "faxStep.json" },
										{ "$ref": "ussdSayStep.json" },
										{ "$ref": "ussdCollectStep.json" }
									]
								}
							},
							"additionalProperties": false
						},
						"stepnames": {"type": "array"},
						"iface": {"type": "object"}
					},
					"required": ["name","label","steps","stepnames"]
				}
			},
			"lastStepId": {
				"type": "integer"
			},
			"activeNode": {
				"type": "integer"
			},		
			"lastNodeId": {
				"type": "integer"
			},		
			"startNodeName": {
				"type": "string"
			}
		}
	},
	"nullOrString": {
		"oneOf":[
				{"type":"null"},
				{"type":"string", "minLength":1}
		]
	},
	"nullOrBoolean": {
		"oneOf":[
				{"type":"null"},
				{"type":"boolean"}
		]
	},
	"variableName": { 
		"type":"string", 
		"pattern":"^[A-Za-z]+[A-Za-z0-9_]*$" 
	}
}

